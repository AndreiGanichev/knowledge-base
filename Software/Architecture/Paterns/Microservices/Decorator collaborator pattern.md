---
date: 2025-11-20
---
# Decorator collaborator

Паттерн проектирования декоратор - это пример следования [[Open close principle]] - поведение расширяется, а не зменяется. На этом же принципе основан и decorator collaborator. Он применим, когда нужно расширить поведение монолита или среагировать на произошедшие изменения, но нет возможности внести изменения в его кодовую базу. Как и в [[Strangler fig pattern]] перед монолитом добавляется прокси. В данном случае прокси-декоратор пропускает через себя запрос и прежде чем вернуть ответ выполняет вызов к микросервису.

Ограничение паттерна в том, что декоратору доступны только данные запроса и ответа. Если этого недостаточно, то:

1. можно запросить нужные данные. Но это "утяжеляет" декоратор дополнительной ответственностью, что нежелательно: чем больше в нем будет логики, тем больше он будет сам приближаться к статусу микросервиса.
2. микросервис может сам запросить недостающие данные при обработке запроса

Оба способа увеличивают время обработки исходного запроса, поэтому decorator collaborator лучше всего работает, когда все необходимые данные можно получить из запроса и ответа.

Альтернативой decorator collaborator является паттерн [[Change data capture patterm]]

---

## Источники

1. [[Monolith to microservices book]]

## Ссылки

1. [[Migration from monolith]]
