---
date: 2023-04-10
tags:
    - tag
---

Это модель, предполагающая, что вызовы удаленных сервисов по сети выглядят как вызовы обычных методов программы в том же процессе. Таким образом обеспечивается [location transparency](https://en.wikipedia.org/wiki/Location_transparency)

### Недостатки идеи

1. удаленный сервис в отличие от кода, выполняющегося в том же процессе, полностью вне нашего контроля. Cервис может медленно обрабатывать запрос или отказать(эти состояния не всегда просто отличить, см. [[Failure detection]]). Необходимо использовать [[Timeout pattern]].
1. запрос может дойти и сервис выполнить свою работу, но потеряться может ответ. Тогда как локальный вызов гарантированно либо выполнится успешно, либо завершиться исключением.
1. время обработки запросов удаленным сервисом может сильно отличаться от запроса к запросу в отличие от стабильных и предсказуемых вызовов в одном процессе.
1. в случае *timeout* можно попробовать повторить запрос([[Retry pattern]]), но с учетом вышеописанных проблем нельзя быть уверенным, что изначальный запрос не дошел успешно и не выполнился на удаленном сервисе. Чтобы не бояться повтора выполнения уже выполненной операции, то API удаленного сервиса должно обеспечивать свойство [[Idempotency]]
1. при вызове функции локально ей можно передать указатель в качестве параметра. При удаленном вызове все данные нужно передать непосредственно в запросе.
1. возможно несоответствеи типов данных языков программирования клиента и удаленного сервиса


Получается что не удается полноценно абстрагироваться от способа вызова функции: локально или удаленно. RPC - это [[Leaky abstraction]].
---

### Источники:
1. [[Designing Data-Intensive Applications book]]. Chapter 4. The problem with RPCs.

### Ссылки:
1. [[Async vs sync]]