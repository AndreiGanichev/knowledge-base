---
date: 2022-08-31
tags:
    - boundaries
---

### Моделирование

**Модель** - это представление реального мира, созданное для решения конкретной задачи/проблемы. Модель не может и не должна быть копией реального мира, иначе в ней не будет смысла. Модель - это абстракций, потому что содержит только информацию необходимою в контексте конкретной проблемы.

Типичный пример модели - карта. Каждый тип карт(дорожная, местности, туристическая, погодная, коммуникаций) создан для решения конкретной проблемы и отражает только часть реального мира, актуальную в конкретной проблеме.

Так и *UL*, как модель, не является копией реального мира, иначе разработчикам пришлось бы стать экспертами.

### Bounded context

Важнейшая особенность UL это непротиворечивость. Но более или менее сложный домен по своей природе противоречив - существуют понятия, которые в разных контекстах имеют разное значение. Если на уровне человеческого общения такая неоднозначность не создает проблемы и смысл может быть понятен из контекста, то при переносе модели в код этого уже нельзя допустить

> Ambiguity doesn't compile. Alberto Brandolini video

Для решения этой проблемы DDD предлагает разделить *UL* на более мелкие подмножества, которые в итоге будут максимально точными и однозначными. UL является "ubiquotous" не потому что он "универсальный", а потому что он используется повсеместно командой для решения конкретной проблемы.

**Bounded context** обозначает границу согласованности (и соответственно применимости) модели и создает контекст для *UL*.

Разделение на *BC* подчеркивает существование разных моделей, делает различия явными, даже если в самой предметной области эти различия не столь очевидны самим доменным экспертам.

### Bounded context vs subdomain

*BC* - это в первую очередь граница применимости модели. Размер модели(определяется границами) не имеет значения, главное то, помогает ли она решать проблему, для которой создавалась или нет. В примере Хононова кусок картона - модель холодильника для проверки пройдет ли она в конкретный проем. В этой модели игнорируется высота холодильник. Это сделано намеренно: высоту гораздо проще проконтролировать отдельно рулеткой, чем включать в модель(как-то надо к куску картона приделать рейку или типа того). Замер полученный рулеткой - это еще одна модель. Это пример того, что иногда две более простые модели проще, чем одна сложная.

Если *Subdomain* - определяется структурой бизнеса, его стратегией развития и преимущества перед конкуррентами, и следовательно находятся в процессе исследования предметной области. **BC является результатом стратегического проектирования**, потому что именно границы BC - это границы автономных компонентов, которые:

1. могут развиваться и **доставляться** независимо
2. определяют структуру команд. Над одним BC может работать только одна команда. При этом одна команда может работать в нескольких BC

В больших BC сложнее поддерживать согласованность. Если спроектирвоать BC более маленькими, то их соответственно будет больше по кол-ву и тогда придется поддерживать больше интеграций. Явный признак того, что BC спроектированиы слишком мелко - представляющие их компоненты приходится доставлять совместно, т.е. нет их автономности.

**SD определяет логические границы** (namespaces, модули, пакеты в зависимости от языка программирования), а **BC - физические** (подсистемы, сервисы, компоненты. Главное - это независимость реализаций, развития, версионирование и доставки)

Чаще всего стартовой точкой является соотношение между SD и BC 1-1, но это необязательно. Например в случае если важны независимое развертывание или орг структура команд, то можно и в одном SD спроектировать два BC


---

### Источники:
1. Learning DDD. Chapter 3. Managing domain complexity. Vladik Khononov

### Ссылки:
1. [[Ubiquotous Language]]
1. [[Subdomain]]
1. [[Abstraction]]