---
date: 2023-02-02
tags:
    - tag
---

**Масштабируемость** - это способность системы справляться с ростом нагрузки. 

## Нагрузка

Нагрузку на систему рассматривают не обощенно и абстрактно, а в виде конкретных [[Load parameters]]. При этом некоторые параметры могут быть ключевыми. Например, для **Twitter** таким параметром является *fanout* - какому количеству подписчиков необходимо в ленту "доставить" твит автора. Такие ключевые параметры влияют на итоговое архитектурное решение.

1. маленький fanout: можно добавлять твит в ленту каждому фоловеру в момент публикации твита. Когда пользователь запрашивает ленту, отдаем ему готовый, заранее сформированный результат
1. большой fanout: сохранять во все ленты в момент публикации будет слишком дорого и тогда выгоднее ленту формировать в момент запроса конкретного пользователя

В итоге на практике используется комбинированное решение, потому что среди большинства обычных пользователей с небольшим кол-вом подписчиок есть celebrities  с миллионами подписчиков.


## Scalable architecture

Как и в случае с [[Reliability]] и разными видами *faults* нельзя сделать просто "масштабируемое решение", готовое к росту любого вида нагрузки. Мы должны предполагать как именно будет расти нагрузка на систему и быть готовым к этому виду нагрузки. 

> An architecture that scales well for a particular application is built around assumptions of which operations will be common and which will be rare—the load parameters.

Не существует готового решения, которое решало бы проблему масштабирования для всех приложений(*one size fit all*). Наоборот в каждом конкретном случае архитектор комбинирует general purpose решения, используя извстные паттерны, чтобы получить масштабируемую систему именно для его случая.

> For example, a system that is designed to handle 100,000 requests per second, each 1 kB in size, looks very different from a system that is designed for 3 requests per minute, each 2 GB in size—even though the two systems have the same data through‐ put.

Например, для **Twitter** при росте общего кол-ва пользователей, RPS на чтение ленты будет расти значительно быстрее RPS на публикацию твитов, потому что большинство пользователей только читают. Поэтому именно запросы на чтение ленты будут **основным направлением роста нагрузки** в процессе развития системы.

## Производительность

Для оценки масштабируемости(как система справляется с ростом нагрузки), необходимо отслеживать метрики *performance*

---

### Источники:
1. [[Designing Data-Intensive Applications book]]. Chapter 1.

### Ссылки:
1. [[Horizontal scaling]]#
1. [[Vertical scaling]]#
1. [[Scalability vs Performance]]]