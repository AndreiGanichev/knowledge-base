---
date: 2023-08-22
tags:
    - memory-vs-disk
---
# Partitioning vs HashTable

## Сходства

1. реализуют подход: *поиск быстрый, когда знаешь где искать*. То есть данные делятся на части: *partition, backet* - что позволяет при чтении работать уже с более небольшим набором данных. В случае партиционирования приходится искать, например по ключу, только в одной партиции. В случае хэш-таблицы приходится обрабатывать возможные коллизии и последовательно искать среди записей внутри корзины.
1. хэш-таблица основана на использовании хэш-функции. Один из способов партиционирования предполагает вычисление хэша от ключа и расположение в одной партиции диапазона хэшей.
1. имеют схожую цель: как можно более равномерно распределить данные по партициям/нодам/корзинам. И для выполнения этого требования используют рехэширование и ребалансировку.

## Различия

1. в хэш-таблицах для вычисления индекса корзины использует взятие модуля от хэша по количеству корзин. Такой подход неоправдан при партиционировании как способ ребалансировки данных в зависимости от количества нод(N): ```hash(ID) mod N``` будет меняться при любом изменении N. А добавление новых и отказ работающих нод - является нормальной ситуацией для кластера. При такой стратегии ребалансироваки каждый раз придется перемещать между нодами практически **все** имеющиеся данные.
Подход с модулем работает для хэш-таблиц, потому что во-первых, количество корзин меняется реже(хотя также как и количество нод зависит от объема данных), во-вторых перемещение данных в памяти значительно проще, чем перемещение на диске, а тем более между машинами в распределенной системе.
1. к хэш-функциям для партиционирования предъявляются более строгие требования: равномерность, отсутствие коллизий, лавинность(пригодится для монотонно возрастающих ключей). Кроме того стандартные библиотеки хэширования предназначены для работы на конкретной машине(в некоторых реализациях могут возвращать адрес в оперативной памяти, он же уникальный), а при выполнении на разных машинах для одних и тех же значений могут давать разный рузкльтат. Поэтому в партиционировании криптографические алгоритмы.

---

## Источники

1. [[Designing Data-Intensive Applications book ]]. Chapter 6.

## Ссылки

1. [[Спринт 4. Хэш таблицы]]
1. [[Hash function]]
1. [[Partition strategy]]
1. [[Rebalancing]]
