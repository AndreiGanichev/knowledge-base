---
date: 2023-08-16
---
# Sloppy quorum

Строгий кворум требует, чтобы из n нод w/r нод выполнили операцию успешно. Но возможна ситуация, когда общее количество нод кластера больше, чем n. Это может быть в случае партиционирования, когда существует n реплик конкретной партиции. Эти реплики распределяются по нодам кластера, общее количество которых можетбыть больше n.

В случае если из-за отказа нод не набирается требуемое количество w/r возникает диллема:

1. либо говорим, что операция не может быть выполнена
1. либо пытаемся добрать недостающие до w/r ноды не из числа n, т.е. берем те ноды, на которых реплик текущей партиции нет.

Второй вариант называется *sloppy quorum*.

Клепманн проводит такую аналогию: идете домой, но вы потеряли ключи, а дома никого нет. Тогда вы проситесь переночевать к соседям. При этом как только кто-то из семьи придет домой, вы сразу вернетесь на положенное место.

## Hinted handoff

Это и есть процесс возвращения данных ~~к себе домой~~ на нужную реплику, как только они станут доступными.

---

## Источники

1. [[Designing Data-Intensive Applications book ]]. Chapter 5.

## Ссылки

1. #[[Quorum]]
