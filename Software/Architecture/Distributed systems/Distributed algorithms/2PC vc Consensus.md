---
date: 2024-03-12
---
# 2PC vc Consensus

1. координатор в 2PC не выбирается
1. алгоритм консенсуса обеспечивает *fault taulerance*:
    - для работы алгоритма консенсуса обычно требуется большинство нод ([[Quorum|majority]]), тогда как в 2PC требуется получить согласие на запрос prepare ото всех участников
    - алгоритмы консенсуса предусматривают восстановление состояния после выбора нового лидера. А вот если в 2PC координатор отказал после стадии prepare(и так отказал, что уже не вернется обратно), система остается в *uncertain* состоянии.

2PC является примером алгоритма, в котором принятие решения возложено на конкретную ноду(координатора). Другим примером является [[Single leader replication]]. Такой подход сильно упрощает алгоритм, но при этом теряется *fault taulerance*, потому что в случае отказа этой ноды система либо должна остановить работу, либо может перейти в некорректное состояние.
Алгоритм консенсуса тоже должен быть остановлен в случае отказа большинства нод, но это гораздо более устойчиво к отказу.

---

## Источники

1. [[Designing Data-Intensive Applications book]]. Chapter 9.

## Ссылки

1. [[Consensus]]
1. [[Two-phase commit]]
