---
date: 2023-08-13
---
# Multi leader replication

Другие названия: *master-master*

В кластере существует несколько лидеров. У каждого из лидеров есть свои фоловеры, на которые реплицируются данные. Плюс происходит синхронизация лидеров между собой.

Где актуально:

1. наличие нескольких географически распределенных дата центров. В каждом дата центре есть свой лидер и его фоловеры. Запросы пользователей конкретных регионов идут в конкретные датацентры, а значит на конкретные лидеры. Репликация в первую очередь происходит внутри дата центра по приватной и быстрой сети. Репликация между дата центрами может идти по публичному интернету, а значит менее предсказуема с точки зрения скорости.
1. приложения с офлайн доступом. Любой мобильное приложение может иметь свою СУБД, а значит выступать в роли лидера, который может модифицировать данные и потом реплицировать их в облако.
1. приложения одновременного редактирования документов, например Google Docs. Каждый редактор является лидером и правит свою версию документа, из которых потом должно сложиться итоговое состояние.

Главная проблема Multi-leader replication - это [[Write conflicts|*конфликты*]], которые неизбежно возникнут при одновременном изменении одних и тех же данных на разных лидерах.

Реляционные СУБД обычно не поддерживают multi leader репликацию, для этого используют отдельные расширения.

---

## Источники

1. [[Designing Data-Intensive Applications book ]]. Chapter 5.

## Ссылки

1. #[[Replication]]
