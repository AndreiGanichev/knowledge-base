---
date: 2022-07-04
tags:
    - tag
---

**Liveness:** лидер в итоге выбран
**Safety**: выбран только один лидер (отсутствует *split brain*)

### Достоинства

Наличие лидера/координатора упрощает распределенные алгоритмы, снижает количество передаваемых сообщений.

### Недостатки

Лидер является узким местом в системе, а значит снижается отказоустойяивость.
Чтобы невилировать этот недостаток используют подходы:
1. разные лидеры на разные операции
1. при использовании партиционирования лидер может быть на партицию

### Функции лидера

1. координация распределенного алгоритма
1. координация восстановления/перестройки системы после падения, при инициализации или большого структурного изменения системы
1. хранение глобального состояния

### Примеры

При партиционировании в *Kafka* используется лидер на партицию. На одной ноде могут располагаться несколько лидеров. Поэтому при падении одной ноды приходится запускать несколько выборов(для каждой партиции). Чтобы не дублировать  одни и те же шаги назначается координатор(лидер) этого процесса. Т.е. выбирается лидер для выборов лидеров партиций. [Kafka documentation](https://kafka.apache.org/documentation/#design_replicamanagment)

Наличие лидера упрощает реализацию алгоритмов [[Total order broadcast]]. В этом случае на лидер идут все запросы клиентов и он определяет порядок операций записи. Дальше записи реплицируются на другие ноды, сохраняя этот порядок.

Реализации RAFT и Multi-Paxos основываются на наличии временного лидера. 

---

### Источники:
1. Database Internals. Petrov. Oreily, 2019. Chapter 10. Leader election


### Ссылки:
1. [[Distributed algorithms]]