---
date: 2022-05-06
tags:
    - strings
---

## Определение

При программировании на высокоуровневых языках мы оперируем объектами, которые имеют свое состояние. Чтобы это состояние сохранить на диск или передать по сети объекты должны быть представлены в виде последовательности байтов. Этот процесс называется **сериализация**. Процесс восстановления объектов из последовательности байтов(при чтении с диска или из сети) - **десериализация**.

Различают следующие способы сериализации:
1. бинарная
1. json
1. xml

Бинарная сериализация чаще всего более эффективная с точки зрения итогового объема данных. JSON сериализация заключается в преобразовании объекта в строку(по JSON спецификации) и потом уже эта строка может быть в бинарном виде сохранена на диск или передана по сети.

Сложные объекты можно в итоге разложить до примитивных типов: целые числа, числа с плавающей точкой, строки, для которых разработано двоичное представление. И если с типами фиксированной длины(_int16_, _int32_) все более или менее понятно (понятно сколько они будут занимать байтов), то с типами переменной длины все несколько сложнее.

## Сериализация строк

Например, для строк есть два разных способа сериализации:

1. _null-terminated strings_ или _ASCIZ_
   Строки в таком формате всегда окончиваются нулем. Т.о. для чтения нужно просто последовательно читать байты пока не дойдешь до нуля. Чтобы вычислить длину строки нужно все равно проходиться по ней полностью и считать байты - O(n)

1. _Pascal strings_
   Строка представлена уже как структура, которая содержит два поля примитивных типов: сама строка и отдельно ее длина. Чтобы вычислить длину строки, просто читаем нужное поле в структуре - O(1). Но длина самой строки ограничена типов выбранным для значения длины в структуре.

```
String
{
    size    uint_16
    data    byte[size]
}
```

*Pascal string* - это пример как для полуения чего-то более сложного используется композиция простых элементов, в данном случае примитивных типов.

---

### Источники:
1. Database Internals. Petrov. Oreily, 2019. Chapter 3. File formats
2. (Stackoverflow)[https://stackoverflow.com/a/3316779/6194366]

### Ссылки
1. Джоэл Спольски. Джоэл о программировании. Символ-Плюс, 2006. Глава 2. Обращаясь к основам.