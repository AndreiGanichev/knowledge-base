---
date: 2023-05-02
---
# Database migrations

## Почему надо использовать

1. реализуют инкрементальное изменение схемы БД
1. изменение схемы хранится рядом с кодом и версионируется
1. набор миграция позволяет быстро создать актуальную схему БД на новом окружении. Можно сказать что миграции являются одной из практик [[Software/Ops/Basics]].

## Undo script

[[Building evolutionary architectures book]]. Chapter 5. Evolving schemas предлагается не реализовывать *undo* часть миграции, потому что:

1. часто это фактически невозможно сделать. Например, как будет выглядеть *undo* для миграции удаления таблицы?
1. откат миграции можно сделать иначе: применить все имеющиеся миграции за исключением последней
1. миграции в идеале должны быть протестированы, а наличие *undo* удваивает работы по тестированию

---

## Источники

1. link

## Ссылки

1. #[[Database schema]]
