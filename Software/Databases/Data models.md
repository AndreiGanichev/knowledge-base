---
date: 2023-03-01
tags:
    - tag
    - history
---

# Data models

В [[Layered architecture|слое]] доступа к данным модели оптимизированы для хранения данных приложения. Модели данных приложения зависят как от предметной области(сложность и взаимосвязанность данных), так от паттернов доступа и нефункциональных требований.

## История развития

Первоначально в качестве модели доступа к данным использовалась иерархическая(*hierarchical*) модель , которая в какой-то степени напоминает JSON. Ее основной проблемой было моделирование отношения *many-to-many*. В качестве решения этой проблемы были созданы [[Relational model|реляцинная]]# и сетевая(*network*) модели. Первая на несколько десятилетий стала стандартом де-факто для СУБД, а вторая не получила дальнейшего развития.

Реляционная модель удовлетворяла требованиям приложений того времени, основными операциями которых были:

1. *transaction* processing: entering sales or banking transaction, airline reservation
1. *batch* processing: customer invoicing, payroll, reporting

Но со временем спектр приложений расширялся, развивалась область анализа данных и к БД стали предъявляться новые требования. Это и другие [[NoSql prerequisites|причины]]привели к развитию [[NoSql]] решений.

## Какая модель лучше

Как и в других архитектурных решениях нельзя сказать, что одна из моделей лучше или хуже другой. Модель может подходить для конкретного случая(предметная область, паттерны доступа к данным) или нет. Скорее всего ваше решение может быть реализовано с использованием любой модели данных, другое дело что одни модели позволят многое из коробки, сделают код локаничным и читаемым. А для реализации того же самого с другими моделями данных придется побороться: многое перекладывается на сторону приложения(например операции```JOIN```) или код работы с СУБД получается очень запутанным и многословным(см. пример как одни и те же запросы реализованы в реляционной и графовой модели [[Designing Data-Intensive Applications book]]. Chapter 4. Graph Queries in SQL).

### Виды связей

Документная модель данных хорошо моделирует связь *one-to-many*(персона-список интересов), что решается включением списка в состав документа. Весь формат JSON построен на отношении *one-to-many*. Хуже обстоят дела со связями *many-to-one*(университет-персона) и *many-to-many*(компания-персона). Т.к. документоориентированная модель редко поддерживает ```JOIN```, то их придется делать на стороне приложения.

Простые *many-to-many* связи могут быть смоделированы в реляционной модели, но если связи сложные и их анализ участвует в запросах, то лучше подойдут графовые модели данных.

Большое количество связей и их сложность является одним из критериев [[Data intensive application]].

---

## Источники

1. [[Designing Data-Intensive Applications book]]. Chapter 4.

## Ссылки

1. [[Transaction]]
1. [[Docement vs Relational data models]]#
1. [[Database schema]]#
1. [Data modeling in Azure Cosmos DB](https://learn.microsoft.com/en-us/azure/cosmos-db/nosql/modeling-data)
