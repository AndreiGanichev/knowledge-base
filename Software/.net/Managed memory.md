---
date: 2023-11-03
---
# Managed memory

**Физически** память делится на три кучи:

1. small object heap
1. large object heap
1. pinned object heap

**Логически** объекты в памяти распределяются на три поколения: 0, 1, 2.

Объекты в soh создаются в 0м поколении и переходят в следующее, если переживают сборку мусора.
Объекты создаваемые в loh, soh сразу попадают во 2е поколение. Поэтому эти две кучи объединяют под названием *user old heap*. User потому что они попадают в эти кучи сразу по итогам действия пользователя(создал большой или закрепил объект). А old подчеркивает что эти объекты долгоживущие: они сразу создаются во 2м поколении. Например, если объект закрепить(pin) на очень короткое время (между сборками мусора), то это равносильно тому, что его не закреплять вообще - его метоположение в памяти все равно не измениться, если не было сборки и последующей компактинга памяти.

---

## Источники

1. link

## Ссылки

1. [Internals of the poh by Maoni](https://devblogs.microsoft.com/dotnet/internals-of-the-poh/)
