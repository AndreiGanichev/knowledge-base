---
date: 2023-11-02
---
# Издержки асинхронных методов

1. Асинхронный метод выполняется синхронно = на момент вызова ```await``` уже есть результат асинхронной операции. Если асинхронный метод выполняется синхронно, то издержки:
    - производительности достаточно малы
    - памяти за счет *allocation*: для методов, возвращающих ```Task``` нет издержек, ```Task<T>``` - примерно 88 байт(для платформ x64)
2. ```ValueTask<T>``` позволяет решить проблему *allocation* для асинхронных методов, выполняющихся синхронно
3. издержки производительности при асинхронном выполнении асинхронного метода более ощутимы: 300 байт (для платформ х64)
4. методы, возвращающие ```ValueTask<T>``` несколько быстрее методов, возвращающих ```Task<T>``` при синхронном завершении и наоборот - при асинхронном. Первое связано с п.2, а второе - с тем, что конечный автомат, генерируемый для ```ValueTask<T>```-метода должен хранить больше данных, чем КА для ```Task<T>```-метода

---

## Источники

1. [The performance characteristics of async methods](https://blogs.msdn.microsoft.com/seteplia/2018/01/25/the-performance-characteristics-of-async-methods/)

## Ссылки

1. link
