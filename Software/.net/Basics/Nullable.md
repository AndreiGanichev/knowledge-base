---
date: 2023-11-03
---
# Nullable

1. `Nullable<Т>` тип - это структура, в основе которой лежит значимый тип, но она также поддерживает отсутствие значения. В качестве параметра типа Т может выступать только структура. В ней помимо `HasValue` и `Value` есть метод `GetValueOrDefault(T defaultValue)`.

1. Nullable типы встроены в C# и поддерживают унарные, бинарные операторы, операторы равенства и сравнения. Принцип их действия такой: если один из операндов `null`, то смотрим можно ли вычислить значение. Например `true & null = null; false & null = false; true | null = true; 5 > null = null`.

1. При использовании nullable в различных  операциях(например математических) приводит к генерации большого количества IL-кода со всякими проверками наличия значения и т.д. Поэтому nullable лучше использовать только как контейнеры для данных.

1. Если нужна упаковка nullable экземпляра(он ведь структура), например `Nullable<int>`, то упаковка производится только если там реально есть значение. Причём упакуется именно значение `int`. При этом Если нет, просто `null` передаётся. Распаковать можно в `int` или `Nullable<int>`.

1. Метод `GetType()` для `Nullable<T>` вернёт `Т`.

1. Допустим есть переменная  `int? x = 5;` Несмотря на то, что `Nullable<int>` не реализует `IComparable`, тот факт что `int` реализует его позволяет привести х к этому интерфейсу. `((IComparable) x).CompareTo(5);`

---

## Источники

1. [[CLR via C# book]]

## Ссылки

1. link
