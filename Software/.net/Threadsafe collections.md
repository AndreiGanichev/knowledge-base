---
date: 2023-11-03
---
# Threadsafe collections

1. Bag - произвольный набор элементов, уникальность не обязательна. 
    - синхронизация - содержит внутри мини-коллекции для каждого потока. При запросе элемента поиск сначала делается в коллекции потока, потом в коллекциях других потоков.
    - При запросе GetEnumerator фиксирует снимок коллекции в данный момент
2. Queue, Stack
    - синхронизация - Interlocked
    - При запросе GetEnumerator фиксирует снимок коллекции в данный момент
3. Dictionary
    - синхронизация - Monitor
    - При запросе GetEnumerator ничего не фиксирует, поэтому в процессе перебора состав коллекции может меняться

---

## Источники

1. [[CLR via C# book]]

## Ссылки

1. [[Collection data structures]]
